(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,a){e.exports=a(129)},109:function(e,t,a){},111:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),i=a(19),l=(a(109),a(27)),s=a(28),u=a(31),m=a(29),h=a(71),p=a(13),d=a(180),f=a(179),g=a(68),E=a.n(g),v=a(81),b=new(a(67).a);function y(e,t,a,n){fetch(e,t).then(function(){var e=Object(v.a)(E.a.mark((function e(t){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().catch((function(e){return console.log("data: `"+r+"` err: "+e)}));case 2:r=e.sent,console.log(r+"\n"+t),e.t0=t.status,e.next=500===e.t0||403===e.t0||401===e.t0||400===e.t0?7:201===e.t0||200===e.t0?10:12;break;case 7:return console.log(t.status),n(r.error.message||("[object Object]"==r.error.toString()?JSON.stringify(r.error):r.error)),e.abrupt("break",14);case 10:return a(r),e.abrupt("break",14);case 12:return n("Something went wrong while contacting the server!"),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var O={isAuthenticated:function(){return"undefined"!=typeof b.get("token")},authenticate:function(e,t){y("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},(function(e){b.set("token",e.token,{path:"/",expires:function(){var e=new Date;return e.setTime(e.getTime+36e5),e}()}),t(1)}),(function(e){t(0,e)}))},registerUser:function(e,t){y("/api/users/register",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},(function(e){t(1)}),(function(e){t(0,e)}))},logout:function(e){b.remove("token"),e()},getSelfInfo:function(e){y("/api/users/me",{headers:{Authorization:"Bearer "+b.get("token")}},(function(t){e(1,t)}),(function(t){e(0,t)}))},getAllEvents:function(e){y("/api/events/all",{headers:{Authorization:"Bearer "+b.get("token")}},(function(t){e(1,t)}),(function(t){e(0,[{name:"Couldn't find events"}])}))},registerEvent:function(e,t){y("/api/events/"+t+"/register",{method:"POST",headers:{Authorization:"Bearer "+b.get("token")}},(function(t){e(1,t)}),(function(t){e(0,[{name:"Couldn't find events"}])}))}},j=a(92),w=a(182),k=a(164);a(111);function C(){return r.a.createElement("div",{className:"container"},r.a.createElement(j.a,{className:"square",elevation:3,square:!0},r.a.createElement("div",{className:"content"},r.a.createElement(w.a,{display:"flex",style:{height:"100%"},flexDirection:"column",alignItems:"center",justifyContent:"center",className:"box"},r.a.createElement("h1",null,"Volunteer"),r.a.createElement("h3",null),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement(i.b,{to:"/login"},r.a.createElement(k.a,{variant:"contained",color:"primary"},"Login")),r.a.createElement(i.b,{to:"/register"},r.a.createElement(k.a,{variant:"contained",color:"primary"},"Register")))))))}var S=a(22),x=a(186),N=a(181),A=a(184);a(117);function I(){var e=Object(p.g)(),t=r.a.useState(""),a=Object(S.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(S.a)(c,2),l=i[0],s=i[1],u=r.a.useState(!1),m=Object(S.a)(u,2),h=m[0],d=m[1],f=r.a.useState(""),g=Object(S.a)(f,2),E=g[0],v=g[1],b=r.a.useState("Log In"),y=Object(S.a)(b,2),C=y[0],I=y[1],z=function(e,t){"clickaway"!==t&&d(!1)};return r.a.createElement("div",{className:"container"},r.a.createElement(x.a,{open:h,autoHideDuration:6e3,onClose:z},r.a.createElement(A.a,{onClose:z,severity:"error"},"Error! ",E)),r.a.createElement(j.a,{className:"square",elevation:3,square:!0},r.a.createElement("div",{className:"content"},r.a.createElement(w.a,{display:"flex",style:{height:"100%"},flexDirection:"column",alignItems:"center",justifyContent:"center",className:"box"},r.a.createElement("h1",null,"Login!"),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement(N.a,{placeholder:"Username",onChange:function(e){return o(e.target.value)}}),r.a.createElement(N.a,{placeholder:"Password",type:"password",onChange:function(e){return s(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){I("Logging in..."),O.authenticate({username:n,password:l},(function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?e.push("/app"):(I("Log In"),v(a),d(!0))}))}},C))))))}a(118);function z(){var e=Object(p.g)(),t=r.a.useState(""),a=Object(S.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(S.a)(c,2),l=i[0],s=i[1],u=r.a.useState(""),m=Object(S.a)(u,2),h=m[0],d=m[1],f=r.a.useState(""),g=Object(S.a)(f,2),E=(g[0],g[1],r.a.useState(!1)),v=Object(S.a)(E,2),b=v[0],y=v[1],C=r.a.useState(""),I=Object(S.a)(C,2),z=I[0],D=I[1],q=function(e,t){"clickaway"!==t&&y(!1)};return r.a.createElement("div",{className:"container"},r.a.createElement(x.a,{open:b,autoHideDuration:6e3,onClose:q},r.a.createElement(A.a,{onClose:q,severity:"error"},"Error! ",z)),r.a.createElement(j.a,{className:"square",elevation:3,square:!0},r.a.createElement("div",{className:"content"},r.a.createElement(w.a,{display:"flex",style:{height:"100%"},flexDirection:"column",alignItems:"center",justifyContent:"center",className:"box"},r.a.createElement("h1",null,"Register!"),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement(N.a,{placeholder:"Username",onChange:function(e){return o(e.target.value)}}),r.a.createElement(N.a,{placeholder:"Password",type:"password",onChange:function(e){return s(e.target.value)}}),r.a.createElement(N.a,{placeholder:"Email",onChange:function(e){return d(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){O.registerUser({username:n,password:l,email:h},(function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?e.push("/login"):(D(a),y(!0))}))}},"Register"))))))}var D=a(185),q=a(167),L=a(174),M=a(175),R=a(176),U=a(177),B=a(178),T=a(166),W=a(64),F=a(90),P=a.n(F),J=a(91),G=a.n(J),H=a(89),Q=a.n(H),V=a(88),_=a.n(V),K=a(187),$=a(188),X=a(168),Y=a(189),Z=a(17),ee=a.n(Z),te=(a(119),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={lat:39.8283,lng:98.5795,zoom:10,events:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.getAllEvents((function(t,a){console.log(a),e.setState((function(){return{events:a.data}})),console.log(e.state.events)})),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.setState({lat:t.coords.latitude,lng:t.coords.longitude})}))}},{key:"render",value:function(){var e=[this.state.lat,this.state.lng];return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(K.a,{center:e,zoom:this.state.zoom,style:{width:"100%",height:"100%"}},r.a.createElement($.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),this.state.events?this.state.events.map((function(e){return r.a.createElement(X.a,{position:e.location,icon:ee.a.icon({iconUrl:"/marker.webp",iconSize:[50,50],iconAnchor:[25,50]})},r.a.createElement(Y.a,null,e.name))})):""))}}]),a}(r.a.Component)),ae=a(86),ne=a(169),re=a(170),oe=a(171),ce=a(172),ie=a(173),le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={events:[],registeredFor:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.getSelfInfo((function(t,a){e.setState((function(){return{registeredFor:a.registeredEvents}}))})),O.getAllEvents((function(t,a){console.log(a),e.setState((function(e){return{events:a.data}})),console.log(e.state.events)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(ne.a,{container:!0,spacing:3,style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",padding:"30px",fontFamily:"Comfortaa"},direction:"row"},this.state.events?this.state.events.map((function(t){return r.a.createElement(ne.a,{item:!0},r.a.createElement(re.a,Object(ae.a)({style:{minWidth:275},key:t.name},"style",{margin:"2em",padding:"2em",borderRadius:"30px",transform:"scale(1.1)"}),r.a.createElement(oe.a,{style:{fontFamily:"Comfortaa"}},r.a.createElement(W.a,{variant:"h5",component:"h2"},t.name),t.imageUrl?r.a.createElement(ce.a,{image:t.imageUrl}):"",r.a.createElement(W.a,{style:{marginBottom:12},color:"textSecondary"},t.participants.length," ",1==t.participants.length?"participant":"participants"),r.a.createElement(W.a,{variant:"body2",component:"p"},t.description)),r.a.createElement(ie.a,null,r.a.createElement(k.a,{size:"small",onClick:function(){O.registerEvent()}},e.state.registeredFor.includes(t._id)?"Unregister":"Register"))))})):"Loading...")}}]),a}(r.a.Component),se=a(87),ue=a.n(se),me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={id:""},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.getSelfInfo((function(t,a){console.log(a),e.setState({id:a._id})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,""!=this.state.id?r.a.createElement(ue.a,{value:this.state.id}):"Loading...")}}]),a}(r.a.Component),he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={drawerOpen:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(D.a,{anchor:"left",open:this.state.drawerOpen,onClose:function(){e.setState({drawerOpen:!1})}},r.a.createElement("div",{style:{width:250},onClick:function(){e.setState({drawerOpen:!1})},onKeyDown:function(){e.setState({drawerOpen:!1})}},r.a.createElement(q.a,null,r.a.createElement(i.b,{to:"".concat(this.props.match.url,"/")},r.a.createElement(L.a,{button:!0,key:"Map"},r.a.createElement(M.a,null,r.a.createElement(_.a,null)),r.a.createElement(R.a,{primary:"Map"}))),r.a.createElement(i.b,{to:"".concat(this.props.match.url,"/events")},r.a.createElement(L.a,{button:!0,key:"Events"},r.a.createElement(M.a,null,r.a.createElement(Q.a,null)),r.a.createElement(R.a,{primary:"Events"}))),r.a.createElement(i.b,{to:"".concat(this.props.match.url,"/qr")},r.a.createElement(L.a,{button:!0,key:"My QR Code"},r.a.createElement(M.a,null,r.a.createElement(P.a,null)),r.a.createElement(R.a,{primary:"My QR Code"})))))),r.a.createElement(U.a,{position:"sticky",style:{zIndex:2}},r.a.createElement(B.a,null,r.a.createElement(T.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){e.setState({drawerOpen:!0})}},r.a.createElement(G.a,null)),r.a.createElement(W.a,{variant:"h6",style:{flexGrow:1}},"Volunteery!"),r.a.createElement(k.a,{onClick:function(){O.logout((function(){e.props.history.push("/")}))},color:"inherit"},"Logout"))),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:this.props.match.path},r.a.createElement(te,null)),r.a.createElement(p.b,{path:"".concat(this.props.match.path,"/events")},r.a.createElement(le,null)),r.a.createElement(p.b,{path:"".concat(this.props.match.path,"/qr")},r.a.createElement(me,null))))}}]),a}(r.a.Component),pe=Object(p.h)(he);Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function de(e){var t=e.children,a=Object(h.a)(e,["children"]);return console.log(O.isAuthenticated()),r.a.createElement(p.b,Object.assign({},a,{render:function(e){var a=e.location;return O.isAuthenticated()?t:r.a.createElement(p.a,{to:{pathname:"/login",state:{from:a}}})}}))}function fe(e){var t=e.children,a=Object(h.a)(e,["children"]);return console.log(O.isAuthenticated()),r.a.createElement(p.b,Object.assign({},a,{render:function(e){var a=e.location;return O.isAuthenticated()?r.a.createElement(p.a,{to:{pathname:"/app",state:{from:a}}}):t}}))}var ge=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={drawerOpen:!1},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.d,null,r.a.createElement(fe,{exact:!0,path:"/"},r.a.createElement(d.a,{maxWidth:"sm",style:{height:"100vh"}},r.a.createElement(C,null))),r.a.createElement(fe,{exact:!0,path:"/login"},r.a.createElement(d.a,{maxWidth:"sm",style:{height:"100vh"}},r.a.createElement(I,null))),r.a.createElement(fe,{exact:!0,path:"/register"},r.a.createElement(d.a,{maxWidth:"sm",style:{height:"100vh"}},r.a.createElement(z,null))),r.a.createElement(de,{path:"/app"},r.a.createElement(pe,null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.9c4478c4.chunk.js.map